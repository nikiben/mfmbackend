var s = require("./lib/swagger-client");

s.authorizations.add("api_key",
  new s.ApiKeyAuthorization("api_key",
    "694d4d1e3abf0e18500020fbb5202a40acc82748efd7fdc73", "header"));

var word = process.argv[2] || 'sanctimonious';
console.log('Word: %s', word);

wordnik = new s.SwaggerApi({
  url: "https://api.wordnik.com/v4/resources.json",
  progress: function (msg) {
    console.log(msg);
  },
  success: function () {
    if (this.ready === true) {
      // console.log('ready');
      var args = { word: word }
      this.word.getDefinitions(args, function (response) {
        // FIXME: Why do you have to parse the response? It should be automatically
        // de-serialized
        var definitions = JSON.parse(response.body.toString());
        for (var i = 0; i < definitions.length; i++) {
          var definition = definitions[i];
          console.log(definition.partOfSpeech + ": " + definition.text);
        }
      });
    }
    else {
      // console.log("not ready!");
    }
  }
});
